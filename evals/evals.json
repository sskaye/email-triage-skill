{
  "skill_name": "email-triage",
  "evals": [
    {
      "id": 1,
      "prompt": "Triage my email. Note: there is no triage-rules.md file in my working folder.",
      "expected_output": "The skill should detect the missing triage-rules.md file, inform the user, and show the template from references/triage-rules-template.md so the user knows what to fill in.",
      "files": [],
      "expectations": [
        "The skill detects that triage-rules.md is missing from the working folder",
        "The skill informs the user that triage-rules.md is required and could not be found",
        "The skill references or shows the template from references/triage-rules-template.md",
        "The skill does NOT proceed to scan or classify emails without rules",
        "The skill does NOT fabricate or invent its own default rules"
      ]
    },
    {
      "id": 2,
      "prompt": "Triage my email. My triage-rules.md is in the working folder. Note for testing: the Gmail connector is NOT available (simulate by noting the tool is missing). Do NOT actually call any Gmail or Chrome tools — just describe what you would do and verify connector availability first.",
      "expected_output": "The skill should check for the Gmail connector first and report that it is not available, asking the user to connect it.",
      "files": ["triage-rules-auto.md"],
      "expectations": [
        "The skill attempts to verify Gmail connector availability as its first step (Step 0)",
        "The skill reports that the Gmail connector is not connected or not available",
        "The skill tells the user to add the Gmail connector from the connectors menu",
        "The skill does NOT proceed to scan the inbox without a working connector"
      ]
    },
    {
      "id": 3,
      "prompt": "I have the following emails in my inbox. Please classify each one according to my triage-rules.md (which is in the working folder). Do NOT use Gmail or Chrome tools — just classify based on the information I provide and present results in review mode format.\n\nEmail 1: From: marketing@randomcorp.com, Subject: 'Boost your sales with our AI tool — free demo!', Snippet: 'Hi, I'd love to show you how our platform can save you time...'\n\nEmail 2: From: jane@testcompany.com, Subject: 'Q1 planning meeting notes', Snippet: 'Here are the notes from today's meeting...'\n\nEmail 3: From: no-reply@zoom.us, Subject: 'Cloud Recording - Meeting Summary Available', Snippet: 'Your cloud recording is now available...'\n\nEmail 4: From: newsletters@substack.com, Subject: 'Weekly digest from The Browser', Snippet: 'This week's top picks...'\n\nEmail 5: From: noreply@amazon.com, Subject: 'Your Amazon order has shipped', Snippet: 'Track your package...'\n\nEmail 6: From: friend@gmail.com, Subject: 'Can you review my resume?', Snippet: 'Hey, would you mind taking a look at my resume and giving feedback?'\n\nEmail 7: From: unknown@mystery.org, Subject: 'Meeting follow-up', Snippet: 'It was nice connecting at the conference. I wanted to...'",
      "expected_output": "A review-mode summary table classifying each email with the correct label, matched rule, and reasoning.",
      "files": ["triage-rules-review.md"],
      "expectations": [
        "Email 1 (randomcorp marketing) is classified as Suspected Junk matching Rule 1 (Vendor Solicitations) due to sales language and demo offer",
        "Email 2 (jane@testcompany.com) is classified as Informational or Action Needed — NOT Suspected Junk — because testcompany.com is a Trusted Domain",
        "Email 3 (Zoom recording) is classified as Suspected Junk matching Rule 3 (Automated Platform Notifications) as a Zoom recording notification",
        "Email 4 (Substack newsletter) is classified as Informational — NOT Suspected Junk — because *@substack.com is a Trusted Source",
        "Email 5 (Amazon shipping) is classified as Suspected Junk matching Rule 4 (Booking Confirmations & Order Notifications)",
        "Email 6 (friend resume review) is classified as Action Needed because it explicitly requests action from the user",
        "Email 7 (mystery.org follow-up) is classified as Unknown — NOT Suspected Junk — because it's ambiguous and the skill should err on the side of keeping",
        "Results are presented in a review-mode table format with columns for From, Subject, Label, Rule, and Reasoning",
        "The skill waits for user approval before proceeding to labeling (review mode behavior)"
      ]
    },
    {
      "id": 4,
      "prompt": "I have the following emails in my inbox. Please classify each one according to my triage-rules.md (which is in the working folder). Do NOT use Gmail or Chrome tools — just classify based on the information I provide. The rules are in auto mode.\n\nEmail 1: From: sales@outreach.io, Subject: 'Quick call about your workflow?', Snippet: 'Are you the right person to discuss improving your team's productivity?'\n\nEmail 2: From: noreply@linkedin.com, Subject: 'You appeared in 15 searches this week', Snippet: 'See who viewed your profile...'\n\nEmail 3: From: boss@testcompany.com, Subject: 'Urgent: Need your input on proposal', Snippet: 'Please review the attached proposal and send comments by EOD...'\n\nEmail 4: From: news@dailymarketing.com, Subject: 'Your weekly marketing digest', Snippet: 'Top stories this week... Unsubscribe from this newsletter...'",
      "expected_output": "Auto-mode summary showing processed counts by label category, without requiring approval.",
      "files": ["triage-rules-auto.md"],
      "expectations": [
        "Email 1 (sales@outreach.io) is classified as Suspected Junk matching Rule 1 (Vendor Solicitations) — sent from outreach.io sales platform with cold outreach language",
        "Email 2 (LinkedIn profile views) is classified as Suspected Junk matching Rule 3 or Rule 5 — routine LinkedIn notification",
        "Email 3 (boss@testcompany.com urgent) is classified as Action Needed — from Trusted Domain AND explicitly requests action",
        "Email 4 (marketing digest with unsubscribe) is classified as Suspected Junk matching Rule 2 (Newsletters & Marketing) — contains unsubscribe link, not a Trusted Source",
        "Results are presented in auto-mode format with a summary count (e.g., Suspected Junk: 3, Action Needed: 1)",
        "The skill does NOT present a table for approval (auto mode skips the approval step)"
      ]
    },
    {
      "id": 5,
      "prompt": "I have the following emails in my inbox. Please classify each one according to my triage-rules.md (which is in the working folder). Do NOT use Gmail or Chrome tools — just classify based on the information I provide.\n\nEmail 1: From: ceo@testcompany.com, Subject: 'Storage quota warning', Snippet: 'Your Google Workspace storage is 90% full...'\n\nEmail 2: From: admin@testcompany.com, Subject: 'New sign-in from Chrome on Windows', Snippet: 'A new sign-in to your account from a recognized device...'\n\nEmail 3: From: security@testcompany.com, Subject: 'Suspicious sign-in attempt blocked', Snippet: 'We blocked a sign-in attempt from an unrecognized device in Russia...'",
      "expected_output": "Tests the interaction between Trusted Domain rules and Rule 3 exceptions — trusted domain emails that ARE automated notifications should still be archived per Rule 3, but security alerts for suspicious activity should be kept.",
      "files": ["triage-rules-review.md"],
      "expectations": [
        "Email 1 (storage quota from testcompany.com) is classified as Suspected Junk — even though testcompany.com is a Trusted Domain, the Decision Framework allows Rule 3 automated notifications to be archived for trusted domains",
        "Email 2 (routine sign-in from testcompany.com) is classified as Suspected Junk — routine sign-in notification is a Rule 3 match, and the Decision Framework carve-out for Trusted Domains explicitly allows Rule 3 notifications to be archived",
        "Email 3 (suspicious sign-in from testcompany.com) is NOT classified as Suspected Junk — it is a security alert about a suspicious/unrecognized sign-in, which is a Rule 3 exception. Should be Action Needed or Informational"
      ]
    },
    {
      "id": 6,
      "prompt": "I have the following emails in my inbox. Please classify each one according to my triage-rules.md. Do NOT use Gmail or Chrome tools — just classify.\n\nEmail 1: From: noreply@uber.com, Subject: 'Your trip receipt', Snippet: 'Thanks for riding with Uber. Trip total: $23.50'\n\nEmail 2: From: noreply@amazon.com, Subject: 'Problem with your delivery', Snippet: 'We were unable to deliver your package. Please choose a new delivery date...'\n\nEmail 3: From: reservations@hotel.com, Subject: 'Booking confirmation #12345', Snippet: 'Your stay at Grand Hotel is confirmed for March 1-3...'\n\nEmail 4: From: airline@delta.com, Subject: 'Check in now for your flight', Snippet: 'Your flight departs tomorrow. Check in online to get your boarding pass...'",
      "expected_output": "Tests Rule 4 (Booking Confirmations) including its exceptions for delivery problems and action-required emails.",
      "files": ["triage-rules-review.md"],
      "expectations": [
        "Email 1 (Uber receipt) is classified as Suspected Junk matching Rule 4 — transactional confirmation requiring no action",
        "Email 2 (Amazon delivery problem) is NOT classified as Suspected Junk — it's a Rule 4 exception for delivery problem notifications that require action. Should be Action Needed",
        "Email 3 (hotel booking confirmation) is classified as Suspected Junk matching Rule 4 — straightforward booking confirmation",
        "Email 4 (Delta check-in) is NOT classified as Suspected Junk — it's a Rule 4 exception because the user needs to take action (check in). Should be Action Needed"
      ]
    },
    {
      "id": 7,
      "prompt": "I have the following emails. Please classify each one according to my triage-rules.md. Do NOT use Gmail or Chrome tools.\n\nEmail 1: From: editor@mattlevine.substack.com, Subject: 'Money Stuff: Banks Are Still Banking', Snippet: 'Good morning. Today we discuss...' (contains unsubscribe link)\n\nEmail 2: From: digest@medium.com, Subject: 'Your Daily Medium Digest', Snippet: 'Top stories for you today...' (contains unsubscribe link)\n\nEmail 3: From: hello@randomnewsletter.com, Subject: 'Weekly Roundup #47', Snippet: 'This week in tech...' (contains unsubscribe link, sent via Mailchimp)",
      "expected_output": "Tests Trusted Sources exception handling — Substack and Money Stuff should be kept, while other newsletters should be archived.",
      "files": ["triage-rules-review.md"],
      "expectations": [
        "Email 1 (Money Stuff from substack.com) is NOT classified as Suspected Junk — it matches BOTH Trusted Source rules: *@substack.com pattern AND Money Stuff newsletter explicitly",
        "Email 2 (Medium digest) is classified as Suspected Junk matching Rule 2 or Rule 5 — Medium digest is not a Trusted Source and matches newsletter/social media signals",
        "Email 3 (random newsletter via Mailchimp) is classified as Suspected Junk matching Rule 2 — contains unsubscribe link, sent via Mailchimp, not a Trusted Source"
      ]
    },
    {
      "id": 8,
      "prompt": "I have the following emails. Please classify each one according to my triage-rules.md. Do NOT use Gmail or Chrome tools. Pay special attention to the decision framework priority order.\n\nEmail 1: From: hr@testcompany.com, Subject: 'Your weekly team digest', Snippet: 'Here's what happened in your team this week... Unsubscribe from these notifications' (contains unsubscribe link, from trusted domain)\n\nEmail 2: From: support@randomtool.com, Subject: 'Re: Issue with my account', Snippet: 'Thanks for reaching out. We've looked into your issue and here's what we found...' (this is a reply in an ongoing thread where the user initiated the conversation)",
      "expected_output": "Tests decision framework priority — trusted domain + unsubscribe link, and ongoing thread from non-trusted domain.",
      "files": ["triage-rules-review.md"],
      "expectations": [
        "Email 1 (hr@testcompany.com digest with unsubscribe) is NOT classified as Suspected Junk — Trusted Domain takes priority over Rule 2 newsletter signals. The Decision Framework says Trusted Domains are KEPT unless it's a Rule 3 automated notification, and a team digest with unsubscribe is Rule 2, not Rule 3",
        "Email 2 (support reply in ongoing thread) is NOT classified as Suspected Junk — Decision Framework priority 2 says ongoing threads where the user is in To/CC should be KEPT, regardless of sender domain"
      ]
    },
    {
      "id": 9,
      "prompt": "After triaging my email, please create or update the email-triage-log.md file. Here are the classification results to log:\n\n1. From: SpammerInc, Subject: 'Free trial of our amazing product', Label: Suspected Junk, Rule: Rule 1 — Vendor Solicitations, Reason: Cold outreach with free trial offer\n2. From: Unknown Person, Subject: 'Quick question', Label: Unknown, Rule: No match, Reason: Ambiguous email that could be personal or spam\n3. From: boss@testcompany.com, Subject: 'Review needed', Label: Action Needed, Rule: N/A (Trusted Domain + action required), Reason: From trusted domain requesting action\n4. From: news@techblog.com, Subject: 'Weekly Newsletter', Label: Suspected Junk, Rule: Rule 2 — Newsletters, Reason: Newsletter with unsubscribe link\n5. From: colleague@testcompany.com, Subject: 'FYI: meeting notes', Label: Informational, Rule: N/A (Trusted Domain), Reason: From trusted domain, informational content\n\nThere is no existing log file — create a new one.",
      "expected_output": "A new email-triage-log.md with proper format containing only Suspected Junk and Unknown entries.",
      "files": [],
      "expectations": [
        "The log file is created as email-triage-log.md",
        "The log contains a Markdown table with columns: Date, From, Subject, Label, Rule, Reason, Feedback",
        "The log includes the Suspected Junk entry for SpammerInc (Rule 1)",
        "The log includes the Unknown entry for Unknown Person (No match)",
        "The log includes the Suspected Junk entry for news@techblog.com (Rule 2)",
        "The log does NOT include the Action Needed entry for boss@testcompany.com — Action Needed emails are not logged",
        "The log does NOT include the Informational entry for colleague@testcompany.com — Informational emails are not logged",
        "The Feedback column is left empty for user annotation"
      ]
    },
    {
      "id": 10,
      "prompt": "After triaging my email, please update the existing email-triage-log.md file. The existing log is in the working folder. Here are the new classification results to add:\n\n1. From: NewSpammer, Subject: 'Partnership opportunity', Label: Suspected Junk, Rule: Rule 1 — Vendor Solicitations, Reason: Cold outreach partnership pitch\n2. From: WeirdSender, Subject: 'Regarding your inquiry', Label: Unknown, Rule: No match, Reason: Cannot determine if this is a legitimate reply or spam",
      "expected_output": "The existing log should be preserved with new entries prepended at the top (newest first).",
      "files": ["existing-log.md"],
      "expectations": [
        "The existing log entries from 2026-02-14 (SpamCorp and LinkedIn) are preserved and still present in the file",
        "New entries for NewSpammer and WeirdSender are added ABOVE the existing entries (newest first)",
        "The new entries use today's date (2026-02-15 or current date), not the original email dates",
        "The table header row is present exactly once at the top",
        "The overall Markdown table format is valid with consistent column structure"
      ]
    },
    {
      "id": 11,
      "prompt": "I just reviewed the triage results and found some mistakes:\n1. The email from 'newsletter@importantpartner.com' with subject 'Monthly Update' was classified as Suspected Junk, but I actually want to keep emails from importantpartner.com — they're a key vendor.\n2. The Substack email from 'boring@substack.com' with subject 'Boring Company Weekly' was kept because of the *@substack.com trusted source rule, but I actually don't want that specific newsletter.\n\nCan you update my triage-rules.md to fix these for future sessions?",
      "expected_output": "The skill should propose specific rule changes and explain them before editing.",
      "files": ["triage-rules-review.md"],
      "expectations": [
        "The skill proposes adding importantpartner.com to the Trusted Domains list",
        "The skill proposes adding an exception or exclusion for boring@substack.com specifically, while keeping the general *@substack.com Trusted Source rule",
        "The skill explains what each proposed change would do and why",
        "The skill asks for user approval before making changes to triage-rules.md",
        "The skill does NOT silently edit the rules file without explaining the changes first"
      ]
    },
    {
      "id": 12,
      "prompt": "I have 30 emails in my inbox that need triaging. Here are the first few:\n\nEmail 1: From: spam1@junk.com, Subject: 'Buy now!'\nEmail 2: From: spam2@junk.com, Subject: 'Limited offer!'\nEmail 3: From: boss@testcompany.com, Subject: 'Team update'\n... (27 more emails)\n\nClassify these according to my triage-rules.md. Do NOT use Gmail or Chrome tools.",
      "expected_output": "The skill should respect the 25-email batch size limit and offer to process the remaining emails in a subsequent batch.",
      "files": ["triage-rules-auto.md"],
      "expectations": [
        "The skill processes at most 25 emails in the first batch",
        "The skill indicates that there are more unprocessed emails remaining",
        "The skill asks the user if they want to process the next batch",
        "The skill does NOT attempt to process all 30 emails in a single pass"
      ]
    },
    {
      "id": 13,
      "prompt": "Triage my email. Use my triage-rules.md from the working folder. When scanning the inbox, explain what Gmail search query you would use and why.",
      "expected_output": "The skill should use the exclusion query to filter out already-labeled emails.",
      "files": ["triage-rules-auto.md"],
      "expectations": [
        "The skill uses or describes a Gmail search query that includes 'in:inbox'",
        "The search query includes exclusion filters: '-label:Suspected-Junk' or equivalent",
        "The search query includes exclusion filters: '-label:Action-Needed' or equivalent",
        "The search query includes exclusion filters: '-label:Informational' or equivalent",
        "The skill explains that the exclusion filters prevent re-processing emails from previous sessions"
      ]
    },
    {
      "id": 14,
      "prompt": "I have the following emails. Classify them according to my triage-rules.md. Do NOT use Gmail or Chrome tools. Apply the false-negative-over-false-positive principle.\n\nEmail 1: From: notifications@github.com, Subject: 'Re: Pull request review requested', Snippet: 'john mentioned you in a comment on PR #452...'\n\nEmail 2: From: no-reply@calendly.com, Subject: 'New event scheduled', Snippet: 'A meeting has been scheduled with Dr. Smith for Thursday at 2pm...'\n\nEmail 3: From: hello@unknownstartup.io, Subject: 'Following up', Snippet: 'Just checking in on my previous email...'",
      "expected_output": "Tests edge cases where classification is ambiguous and the skill should lean toward keeping rather than archiving.",
      "files": ["triage-rules-review.md"],
      "expectations": [
        "Email 1 (GitHub PR mention) is NOT classified as Suspected Junk — it's a mention/tag by name in a professional context (Rule 5 exception for social/community notifications, or it may be classified as Action Needed since a review is requested)",
        "Email 2 (Calendly event) is NOT classified as Suspected Junk — it's a calendar invite which is a Rule 3 exception. Should be Informational or Action Needed",
        "Email 3 (unknown startup follow-up) could reasonably be Suspected Junk (Rule 1 cold outreach) OR Unknown — but if there's any ambiguity about whether this is a legitimate follow-up to a real conversation, it should be classified as Unknown rather than Suspected Junk"
      ]
    },
    {
      "id": 15,
      "prompt": "Please read my triage-rules.md and confirm you understand the mode setting. What mode is it set to, and how does that affect the workflow?",
      "expected_output": "The skill correctly identifies the mode (review) and explains the behavioral difference.",
      "files": ["triage-rules-review.md"],
      "expectations": [
        "The skill correctly identifies the mode as 'review'",
        "The skill explains that review mode presents a summary table with proposed classifications",
        "The skill explains that in review mode, it waits for user approval before proceeding to label and archive",
        "The skill mentions that the user can approve all, reject specific classifications, or ask questions about reasoning"
      ]
    }
  ]
}
